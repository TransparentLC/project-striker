# 二面关底BOSS
# 19777 - 22956 3179 回转开花弹
# 14492 - 19777 5285 左右横跳和两侧奇数弹
# 11138 - 14492 3354 回转开花弹带加速
#  5731 - 11138 5407 “魔神复诵”？
#     0 -  5731 5731 “白昼的客星”？

SET_TEXTURE BOSS_B
SET_HITPOINT 22956
SET_INVINCIBLE 340

SET_HITBOX 0 47 9
SET_HITBOX 0 32 7
SET_HITBOX 0 20 7
SET_HITBOX 0 8 7
SET_HITBOX 0 -14 16
SET_HITBOX 0 -35 7
SET_HITBOX 0 -47 7
SET_HITBOX 0 -57 4
SET_HITBOX -12 47 6
SET_HITBOX -22 47 6
SET_HITBOX -32 46 4
SET_HITBOX -40 46 4
SET_HITBOX -24 -12 12
SET_HITBOX -43 -12 10
SET_HITBOX -57 -12 8
SET_HITBOX -70 -12 6
SET_HITBOX -82 -12 6
SET_HITBOX -92 -11 6
SET_HITBOX -101 -11 6
SET_HITBOX 12 47 6
SET_HITBOX 22 47 6
SET_HITBOX 32 46 4
SET_HITBOX 40 46 4
SET_HITBOX 24 -12 12
SET_HITBOX 43 -12 10
SET_HITBOX 57 -12 8
SET_HITBOX 70 -12 6
SET_HITBOX 82 -12 6
SET_HITBOX 92 -11 6
SET_HITBOX 101 -11 6

SET_EXPLOSION LARGE
SET_EXPLODE_SFX EXPLODE_ENEMY_D
SET_DEBRIS DEBRIS_B 0 47 .125 2 1 5 2
SET_DEBRIS DEBRIS_A 0 32 .125 2 1 5 1
SET_DEBRIS DEBRIS_B 0 20 .125 2 1 5 2
SET_DEBRIS DEBRIS_A 0 8 .125 2 1 5 2
SET_DEBRIS DEBRIS_A 0 -14 .125 2 1 5 1
SET_DEBRIS DEBRIS_B 0 -35 .125 2 1 5 2
SET_DEBRIS DEBRIS_B 0 -47 .125 2 1 5 1
SET_DEBRIS DEBRIS_B 0 -57 .125 2 1 5 2
SET_DEBRIS DEBRIS_B -12 47 .125 2 1 5 2
SET_DEBRIS DEBRIS_B -22 47 .125 2 1 5 1
SET_DEBRIS DEBRIS_B -32 46 .125 2 1 5 1
SET_DEBRIS DEBRIS_B -40 46 .125 2 1 5 1
SET_DEBRIS DEBRIS_A -24 -12 .125 2 1 5 2
SET_DEBRIS DEBRIS_B -43 -12 .125 2 1 5 1
SET_DEBRIS DEBRIS_A -57 -12 .125 2 1 5 1
SET_DEBRIS DEBRIS_B -70 -12 .125 2 1 5 2
SET_DEBRIS DEBRIS_A -82 -12 .125 2 1 5 1
SET_DEBRIS DEBRIS_B -92 -11 .125 2 1 5 1
SET_DEBRIS DEBRIS_B -101 -11 .125 2 1 5 2
SET_DEBRIS DEBRIS_B 12 47 .125 2 1 5 2
SET_DEBRIS DEBRIS_B 22 47 .125 2 1 5 1
SET_DEBRIS DEBRIS_A 32 46 .125 2 1 5 2
SET_DEBRIS DEBRIS_B 40 46 .125 2 1 5 2
SET_DEBRIS DEBRIS_B 24 -12 .125 2 1 5 1
SET_DEBRIS DEBRIS_A 43 -12 .125 2 1 5 2
SET_DEBRIS DEBRIS_A 57 -12 .125 2 1 5 2
SET_DEBRIS DEBRIS_A 70 -12 .125 2 1 5 1
SET_DEBRIS DEBRIS_B 82 -12 .125 2 1 5 1
SET_DEBRIS DEBRIS_B 92 -11 .125 2 1 5 2
SET_DEBRIS DEBRIS_B 101 -11 .125 2 1 5 2

SET_BOSS
REGISTER_DEATH @Ws3ZoYRL
MOVE 192 128 310 EASE_OUT_CUBIC

# 第一形态

SET_BOSS_REMAIN 4
SET_BOSS_HPRANGE 19777 22956
REGISTER_BOSSBREAK @zbFqFGCe
WAIT 310
SET_PHASE_NAME 4
SET_PHASE_BONUS 21 127
WAIT 30

STORE 5 0
STORE 6 13
STORE 7 90

MOD 5 4 @ gWnthRTZ
JUMP_NE %VAR_5% 0 @h0zKFeDM
MOVE_RANDOM 122 88 140 90 180 EASE_INOUT_CUBIC
INC 5 @ h0zKFeDM
STORE 0 0
    NOOP @ 8VrXH9Ie
    STORE 1 %VAR_0%
    MOD 1 5
    JUMP_NE %VAR_1% 0 @a3SrvMXq
    SFX ENEMY_SHOOT_D
    SHOOT_MULTIWAY TYPE_B 0 21 2.5 %VAR_7% 300 6 @ a3SrvMXq
    ADD 7 %VAR_6%
    WAIT 3
INC 0
JUMP_L %VAR_0% 15 @8VrXH9Ie
MUL 6 -1
JUMP @gWnthRTZ

# 第二形态

BONUS_PHASE @ zbFqFGCe
BONUS_BULLET
SET_PHASE_NAME 0
DROP_POINTITEM 10
REGISTER_BOSSBREAK @25orE5Py
SET_HITPOINT 19777
SET_BOSS_REMAIN 3
SET_BOSS_HPRANGE 14492 19777
SET_INVINCIBLE 150
MOVE_CLEAR
MOVE_RANDOM 62 60 40 100 120 EASE_OUT_CUBIC
WAIT 120
SET_PHASE_NAME 5
SET_PHASE_BONUS 22 131
WAIT 30

MOVE_RANDOM 262 60 40 100 120 EASE_OUT_CUBIC @ D2FCnae1
STORE 0 0
INC 0 @ SuqJpLEx
    SFX ENEMY_SHOOT_D
    STORE 1 0
    INC 1 @ moP8XNRN
        SHOOT_AIMING_MULTIWAY TYPE_C 92 -10 3 0 120 9
        SHOOT_AIMING_MULTIWAY TYPE_C -92 -10 3 0 120 9
        WAIT 3
    JUMP_L %VAR_1% 3 @moP8XNRN
    WAIT 21
JUMP_L %VAR_0% 4 @SuqJpLEx

MOVE_RANDOM 62 60 40 100 120 EASE_OUT_CUBIC
STORE 0 0
INC 0 @ GqiqWFsn
    SFX ENEMY_SHOOT_D
    STORE 1 0
    INC 1 @ Ck44mBny
        SHOOT_AIMING_MULTIWAY TYPE_C 92 -10 3 0 120 9
        SHOOT_AIMING_MULTIWAY TYPE_C -92 -10 3 0 120 9
        WAIT 3
    JUMP_L %VAR_1% 3 @Ck44mBny
    WAIT 21
JUMP_L %VAR_0% 4 @GqiqWFsn

JUMP @D2FCnae1

# 第三形态

BONUS_PHASE @ 25orE5Py
BONUS_BULLET
SET_PHASE_NAME 0
DROP_POINTITEM 14
REGISTER_BOSSBREAK @rdxpPjwK
SET_HITPOINT 14492
SET_BOSS_REMAIN 2
SET_BOSS_HPRANGE 11138 14492
SET_INVINCIBLE 270
MOVE_CLEAR
MOVE 192 128 120 EASE_OUT_CUBIC
WAIT 240
SET_PHASE_NAME 6
SET_PHASE_BONUS 23 137
WAIT 30

STORE 0 0
    STORE 1 %VAR_0% @ 8Y6KmNv5
    STORE 2 %VAR_0%
    ADD 1 2
    ADD 2 4
    SFX ENEMY_SHOOT_D
    SHOOT_MULTIWAY TYPE_C 0 21 2.5 %VAR_2% 320 9
    SHOOT_MULTIWAY TYPE_C 0 21 2.4 %VAR_1% 320 9
    SHOOT_MULTIWAY TYPE_C 0 21 2.3 %VAR_0% 320 9
    WAIT 13
ADD 0 17
JUMP @8Y6KmNv5

# 第四形态

BONUS_PHASE @ rdxpPjwK
BONUS_BULLET
SET_PHASE_NAME 0
DROP_POINTITEM 16
REGISTER_BOSSBREAK @Ee1KQcTI
SET_HITPOINT 11138
SET_BOSS_REMAIN 1
SET_BOSS_HPRANGE 5731 11138
SET_INVINCIBLE 270
MOVE_CLEAR
MOVE 192 128 120 EASE_OUT_CUBIC
WAIT 120
SET_PHASE_NAME 7
SET_PHASE_BONUS 24 143
WAIT 30

STORE 0 -30
    STORE 1 %VAR_0% @ gBuWhzHl
    MUL 1 -1
    SFX ENEMY_SHOOT_A
    SHOOT_MULTIWAY TYPE_B -92 -10 5 %VAR_0% 135 19
    SHOOT_MULTIWAY TYPE_B 92 -10 5 %VAR_1% 135 19
    WAIT 5
ADD 0 7
JUMP_L %VAR_0% 130 @gBuWhzHl

STORE 6 3
STORE 7 0
STORE 0 0
    STORE 1 180 @ eepn7UIX
    ADD 1 %VAR_7%
    SHOOT_MULTIWAY TYPE_A -92 -10 3.5 %VAR_1% 120 3
    # STORE 1 150
    # ADD 1 %VAR_7%
    SUB 1 30
    SHOOT_MULTIWAY TYPE_A -92 -10 3.5 %VAR_1% 30 3
    STORE 1 180
    SUB 1 %VAR_7%
    SHOOT_MULTIWAY TYPE_A 92 -10 3.5 %VAR_1% 120 3
    # STORE 1 210
    # SUB 1 %VAR_7%
    ADD 1 30
    SHOOT_MULTIWAY TYPE_A 92 -10 3.5 %VAR_1% 30 3

    STORE 4 %VAR_0%
    MOD 4 9
    JUMP_E %VAR_4% 0 @h4K2EaWA
    JUMP_E %VAR_4% 2 @8tj31bEf
    JUMP_E %VAR_4% 4 @8tj31bEf
    JUMP @24cDvFvq

    STORE 5 %ENEMY_Y% @ h4K2EaWA
    ADD 5 21
    CALC_DIRECTION 5 %ENEMY_X% %VAR_5% %PLAYER_X% %PLAYER_Y%

    SFX ENEMY_SHOOT_B @ 8tj31bEf
    SHOOT TYPE_E 0 21 3 %VAR_5%
    STORE 1 0
    INC 1 @ fhkcKRga
        RANDOM_INT 2 -120 120
        ADD 2 %VAR_5%
        SHOOT TYPE_B 0 21 2 %VAR_2%
    JUMP_L %VAR_1% 4 @fhkcKRga

    ADD 7 %VAR_6% @ 24cDvFvq
    JUMP_GE %VAR_7% 12 @kU3fy1KG
    JUMP_LE %VAR_7% -12 @kU3fy1KG
    JUMP @uvEY0zp8
    MUL 6 -1 @ kU3fy1KG
    WAIT 5 @ uvEY0zp8
INC 0
JUMP_G %HITPOINT% 5731 @eepn7UIX

# 第五形态

BONUS_PHASE @ Ee1KQcTI
BONUS_BULLET
SET_PHASE_NAME 0
DROP_POINTITEM 16
SET_HITPOINT 5731
SET_BOSS_REMAIN 0
SET_BOSS_HPRANGE 0 5731
SET_INVINCIBLE 150
MOVE_CLEAR
MOVE 192 128 120 EASE_OUT_CUBIC
WAIT 120
SET_PHASE_NAME 8
SET_PHASE_BONUS 26 157
WAIT 30

STORE 0 0
STORE 1 -100
STORE 2 100
STORE 3 0
STORE 4 0

NOOP @ Rd4TZAnf
    SHOOT TYPE_D -92 -10 2.75 %VAR_1%
    SHOOT TYPE_D -92 -10 3 %VAR_1%
    SHOOT TYPE_D -92 -10 3.25 %VAR_1%
    SHOOT TYPE_D 92 -10 2.75 %VAR_2%
    SHOOT TYPE_D 92 -10 3 %VAR_2%
    SHOOT TYPE_D 92 -10 3.25 %VAR_2%
    ADD 1 13
    SUB 2 13

    STORE 7 %VAR_0%
    MOD 7 2
    JUMP_NE %VAR_7% 0 @RDYvGNJC
    SHOOT_MULTIWAY TYPE_C 0 21 1.5 %VAR_3% 270 4
    SHOOT_MULTIWAY TYPE_C 0 21 1.5 %VAR_4% 270 4
    ADD 3 17
    SUB 4 17

    STORE 7 %VAR_0% @ RDYvGNJC
    MOD 7 12
    JUMP_E %VAR_7% 9 @27t5R2tx
    JUMP_E %VAR_7% 11 @27t5R2tx
    JUMP @8ZdNG2O7
    SFX ENEMY_SHOOT_C @ 27t5R2tx
    SHOOT_AIMING_MULTIWAY TYPE_E 0 -42 2 0 20 3

    WAIT 5 @ 8ZdNG2O7
    INC 0
JUMP @Rd4TZAnf

HALT

BONUS_PHASE @ Ws3ZoYRL
BONUS_BULLET
SET_PHASE_NAME 0
DROP_POINTITEM 16
EXTEND_LIFE

HALT